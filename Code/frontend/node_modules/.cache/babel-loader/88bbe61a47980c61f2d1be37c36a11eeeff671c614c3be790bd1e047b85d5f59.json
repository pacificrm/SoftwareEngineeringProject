{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport NavBar from \"@/components/NavBar.vue\";\nexport default {\n  name: \"EditProfile\",\n  components: {\n    NavBar\n  },\n  data() {\n    return {\n      username: null,\n      about: null,\n      email: null,\n      auth_token: null,\n      // lists: {},\n      profile_pic: null,\n      error: \"\",\n      good: \"\"\n    };\n  },\n  async created() {\n    this.auth_token = sessionStorage.getItem(\"auth-token\");\n    this.username = sessionStorage.getItem(\"username\");\n    // console.log(this.email)\n    if (!this.auth_token) {\n      alert(\"Please Login to see your dashboard.\");\n      this.$router.push(\"/\");\n    }\n    return fetch(`http://127.0.0.1:5000/api/user`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authentication-Token\": `${this.auth_token}`\n      }\n    }).then(response => response.json()).then(data => {\n      this.email = data[\"email\"];\n      this.fullname = data[\"fullname\"];\n      this.about = data[\"about\"];\n      console.log(data);\n    }).catch(error => console.log(\"1st\", error));\n  },\n  methods: {\n    async uploadImage() {\n      let img = this.$refs.fileinput.files;\n      this.profile_pic = img[0];\n      console.log(img[0]);\n    },\n    async updateprofile() {\n      let formData = new FormData();\n      formData.append(\"fullname\", this.fullname);\n      formData.append(\"about\", this.about);\n      formData.append(\"profile_pic\", this.profile_pic);\n      console.log(formData);\n      console.log(sessionStorage.getItem(\"auth-token\"));\n      // for (var key of formData.entries()) {\n      //   console.log(key[0], key[1]);\n      // }\n      try {\n        const res = await fetch(\"http://127.0.0.1:5000/api/user\", {\n          mode: \"cors\",\n          method: \"PUT\",\n          headers: {\n            \"Access-Control-Allow-Origin\": \"*\",\n            // \"Content-Type\": \"multipart/form-data\",\n            \"Authentication-Token\": sessionStorage.getItem(\"auth-token\")\n          },\n          body: formData\n        });\n        if (res.ok) {\n          console.log(\"Profile-Updated\");\n          this.$router.push(\"/profile\");\n        }\n      } catch (error) {\n        console.log(\"Cannot Update \", error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["NavBar","name","components","data","username","about","email","auth_token","profile_pic","error","good","created","sessionStorage","getItem","alert","$router","push","fetch","method","headers","then","response","json","fullname","console","log","catch","methods","uploadImage","img","$refs","fileinput","files","updateprofile","formData","FormData","append","res","mode","body","ok"],"sources":["/home/agustus/mad2-project/frontend/src/components/EditProfile.vue"],"sourcesContent":["<template>\n  <div class=\"editp\">\n    <NavBar :username=\"this.username\"></NavBar>\n    <div class=\"editprofile\">\n      <div class=\"pform\">\n        <form\n          action=\"http://127.0.0.1:8080/editprofile\"\n          method=\"POST\"\n          enctype=\"multipart/form-data\"\n        >\n          <label for=\"fullname\">Name :</label>\n          <input\n            type=\"text\"\n            v-model=\"this.fullname\"\n            placeholder=\"Enter your full name\"\n            required\n          />\n          <br />\n          <label for=\"about\">About :</label>\n          <input\n            type=\"text\"\n            v-model=\"this.about\"\n            placeholder=\"Enter about yourself\"\n            required\n          />\n          <br />\n          <label for=\"email\">Email :</label>\n          <input\n            style=\"color: black\"\n            type=\"email\"\n            v-model=\"this.email\"\n            disabled\n          />\n          <br />\n          <label for=\"Username\">Username :</label>\n          <input\n            type=\"text\"\n            style=\"color: black\"\n            v-model=\"this.username\"\n            disabled\n          />\n          <br />\n          <label for=\"profilepic\">Profile-Pic :</label>\n          <input\n            style=\"color: wheat\"\n            type=\"file\"\n            ref=\"fileinput\"\n            @input=\"uploadImage()\"\n          />\n          <br />\n          <input\n            type=\"submit\"\n            id=\"btn\"\n            value=\"update\"\n            @click.prevent=\"updateprofile()\"\n          />\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport NavBar from \"@/components/NavBar.vue\";\nexport default {\n  name: \"EditProfile\",\n  components: {\n    NavBar,\n  },\n  data() {\n    return {\n      username: null,\n      about: null,\n      email: null,\n      auth_token: null,\n      // lists: {},\n      profile_pic: null,\n      error: \"\",\n      good: \"\",\n    };\n  },\n  async created() {\n    this.auth_token = sessionStorage.getItem(\"auth-token\");\n    this.username = sessionStorage.getItem(\"username\");\n    // console.log(this.email)\n    if (!this.auth_token) {\n      alert(\"Please Login to see your dashboard.\");\n      this.$router.push(\"/\");\n    }\n    return fetch(`http://127.0.0.1:5000/api/user`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authentication-Token\": `${this.auth_token}`,\n      },\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        this.email = data[\"email\"];\n        this.fullname = data[\"fullname\"];\n        this.about = data[\"about\"];\n        console.log(data);\n      })\n      .catch((error) => console.log(\"1st\", error));\n  },\n  methods: {\n    async uploadImage() {\n      let img = this.$refs.fileinput.files;\n      this.profile_pic = img[0];\n      console.log(img[0]);\n    },\n\n    async updateprofile() {\n      let formData = new FormData();\n      formData.append(\"fullname\", this.fullname);\n      formData.append(\"about\", this.about);\n      formData.append(\"profile_pic\", this.profile_pic);\n      console.log(formData);\n      console.log(sessionStorage.getItem(\"auth-token\"));\n      // for (var key of formData.entries()) {\n      //   console.log(key[0], key[1]);\n      // }\n      try {\n        const res = await fetch(\"http://127.0.0.1:5000/api/user\", {\n          mode: \"cors\",\n          method: \"PUT\",\n          headers: {\n            \"Access-Control-Allow-Origin\": \"*\",\n            // \"Content-Type\": \"multipart/form-data\",\n            \"Authentication-Token\": sessionStorage.getItem(\"auth-token\"),\n          },\n          body: formData,\n        });\n        if (res.ok) {\n          console.log(\"Profile-Updated\");\n          this.$router.push(\"/profile\");\n        }\n      } catch (error) {\n        console.log(\"Cannot Update \", error);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n@import url(\"https://fonts.googleapis.com/css2?family=Yeon+Sung&display=swap\");\n.editp {\n  /* border: 1px solid red; */\n  min-height: 100vh;\n  overflow: hidden;\n  background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),\n    url(\"../assets/s3.png\") no-repeat center/cover;\n}\n.editprofile {\n  /* border: 1px solid red; */\n  min-height: 78vh;\n  margin: 55px 200px 29px;\n  position: relative;\n  font-size: 1.5rem;\n  background: transparent;\n  /* background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),\n    url(\"../assets/pp14.jpeg\") no-repeat center/cover; */\n  /* text-align: center; */\n}\n.pform {\n  /* border: 1px solid red; */\n  position: absolute;\n  width: 70%;\n  left: 160px;\n  margin: 0px;\n  height: 100%;\n}\n.editprofile form {\n  /* border: 1px solid green; */\n  position: relative;\n  height: 100%;\n  width: 100%;\n}\n.editprofile label {\n  color: wheat;\n  margin: 40px;\n}\n.editprofile input {\n  /* border: 1px solid blue; */\n  padding: 10px;\n  font-size: 1.5rem;\n  margin: 20px;\n  width: 500px;\n  font-family: \"Yeon Sung\", cursive;\n  /* text-align: center; */\n}\n\n#btn {\n  text-transform: uppercase;\n  position: absolute;\n  bottom: 5px;\n  margin: 10px;\n  width: 140px;\n  border-radius: 60px;\n  left: 320px;\n  font-weight: 900;\n}\n#btn:hover {\n  /* background: #4a1e85; */\n  background: #6939a7;\n  box-shadow: 2px 2px 1.8px 2px rgb(80, 79, 79);\n  transition: 0.5s;\n  color: white;\n  cursor: pointer;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}